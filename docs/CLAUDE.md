# CLAUDE 协作规则知识库

> 本文件记录 Claude 与用户的协作规则，所有规则在后续开发中必须严格遵守。
> 创建时间：2026-02-13
> 最后更新：2026-02-13

---

## 核心开发规则

### 规则1：方案先行
在编写任何代码之前，必须先描述方案并等待批准。如果遇到需求不明确，在编写任何代码之前务必提出澄清问题。

**执行方式：**
- 先用自然语言描述实现方案
- 列出需要修改的文件
- 说明可能的影响范围
- 等待用户确认后再开始编码

---

### 规则2：任务分解
如果一项任务需要修改超过3个文件，请先停下来，将其分解成更小的任务。

**执行方式：**
- 将大任务拆分为多个小任务
- 每个小任务不超过3个文件
- 逐个完成小任务，每个完成后汇报
- 用户确认后再进行下一个小任务

---

### 规则3：测试覆盖
在编写代码后，列出可能出现的问题，并建议相应的测试用例来覆盖这些问题。

**执行方式：**
- 代码完成后列出潜在问题点
- 为每个问题点建议测试用例
- 提供测试步骤（针对程序小白）

---

### 规则4：BUG修复流程
当发现BUG时，首先要编写一个能够重现BUG的测试，然后不断修复它，直到测试通过为止。

**执行方式：**
1. 先分析BUG现象
2. 编写能重现BUG的测试
3. 修复代码
4. 运行测试确认修复
5. 汇报修复结果

---

### 规则5：持续学习
每次用户纠正后，就在本文件中添加一条规则，这样就不会再发生这种情况。

**新增规则格式：**
```markdown
### 规则N：[规则名称]
[规则描述]

**原因：** [为什么添加这条规则]
**添加时间：** YYYY-MM-DD
```

---

### 规则6：详细操作指南
用户是程序小白，所有需要用户操作的任务必须写具体的操作步骤。

**要求：**
- 每个步骤要有编号
- 说明在哪里操作（哪个文件夹、哪个文件）
- 提供完整的命令或代码
- 说明预期结果是什么
- 如有截图更佳

---

### 规则7：知识库优先
DOCS文件夹是项目的知识库，开发前应先查阅相关文档了解项目背景和已有设计。

**重要文档：**
- `platform_constitution.md` - 平台宪法（最重要）
- `开发计划.md` - 开发计划
- `文档索引.md` - 文档导航

---

## 累积规则（用户纠正后新增）

*（暂无，后续用户纠正后会在此添加）*

---

## 项目快速参考

### 项目结构
```
D:\Cursor\AI-Company\
├── backend/          # Python后端
├── frontend/         # 前端界面
├── projects/         # AI生成的游戏
├── docs/             # 知识库文档
├── logs/             # 运行日志
└── tests/            # 测试文件
```

### 启动项目
```bash
# 1. 进入后端目录
cd D:\Cursor\AI-Company\backend

# 2. 启动服务器
python main.py
```

### 5个AI Agent
| Agent | 角色 | 文件位置 |
|-------|------|----------|
| PM | 项目经理 | `backend/agents/pm_agent.py` |
| Planner | 游戏策划 | `backend/agents/planner_agent.py` |
| Programmer | 程序员 | `backend/agents/programmer_agent.py` |
| Artist | 美术 | `backend/agents/artist_agent.py` |
| Tester | 测试 | `backend/agents/tester_agent.py` |

---

*本文件会持续更新，记录所有协作规则和经验教训。*
